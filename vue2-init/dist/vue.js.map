{"version":3,"file":"vue.js","sources":["../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observe {\r\n    constructor(value) {\r\n        this.walk(value)\r\n    }\r\n    walk(target) {\r\n        Object.keys(target).forEach(key => {\r\n            defineReactive(target, key, target[key])\r\n        })\r\n    }\r\n\r\n}\r\nfunction defineReactive(target, key, value) {\r\n    Object.defineProperty(target, key, {\r\n        get() {\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if (newValue == value) return\r\n            observe(newValue) // 设置的值如果是对象 继续进行劫持\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\nexport function observe(data) {\r\n    // data 就是我们用户传入的数据 我们需要对他进行观测\r\n    if (typeof data !== 'object' || data == null) {\r\n        return\r\n    }\r\n    // 后续我们要知道是否这个对象被观测过了\r\n    return new Observe(data) // xxx instanceof Observe\r\n}","import { observe } from \"./observer/index.js\"\r\n\r\nexport function initState(vm) {\r\n    const options = vm.$options\r\n    // 先props 再methods 再data 再 computed 再watch\r\n    if (options.props) {\r\n\r\n    }\r\n    if (options.methods) {\r\n\r\n    }\r\n    if (options.data) {\r\n        initData(vm)\r\n    }\r\n    if (options.computed) {\r\n        initComputed(vm)\r\n    }\r\n    if (options.watch) {\r\n        initWatch(vm)\r\n    }\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data\r\n    // 需要对用户提供的data属性把他的所有属性进行重写 增添get和set，只能拦截已经存在的属性\r\n    console.log(data)\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n    observe(data)\r\n\r\n}\r\nfunction initComputed() {\r\n\r\n}\r\nfunction initWatch() {\r\n\r\n}","import { initState } from './state';\r\nexport default function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        console.log(options)\r\n        const vm = this\r\n        vm.$options = options\r\n        initState(vm)\r\n    }\r\n}","import  initMixin from './init.js'\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\ninitMixin(Vue)\r\nexport default Vue"],"names":["Observe","value","walk","target","Object","keys","forEach","key","defineReactive","defineProperty","get","set","newValue","observe","data","initState","vm","options","$options","props","methods","initData","computed","watch","console","log","_data","call","initMixin","Vue","prototype","_init"],"mappings":"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"}